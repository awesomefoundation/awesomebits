<section class="admin-pannel">
  <%= render :partial => 'shared/sidebar' %>
</section>

<section class="applications">
  <section class="header">
    <h1>Finalists for <%= @chapter.name %></h1>
  </section>
  <section class="application-filters">
    <nav>
      <label class="chapter-selection" for="chapter-selection">
        <span><%= @chapter.name %></span>
        <span class="arrow"></span>
      </label>
      <input id="chapter-selection" type="checkbox">
      <ol class="chapter-selector">
        <% selectable_chapters_for(current_user).each do |chapter| %>
          <li>
            <%= link_to chapter.name, chapter_finalists_path(chapter) %>
          </li>
        <% end %>
      </ol>
    </nav>

    <form accept-charset="UTF-8" action="<%= chapter_finalists_path(@chapter) %>" class="simple_form filter" method="get">
      <div class="input string optional date-range">
        <label class="string optional" for="filter_start">start date</label>
        <input class="string optional prefilled" id="filter_start" name="start" size="50" type="text" value="<%= @start_date %>">
      </div>

      <div class="input string optional date-range">
        <label class="string optional" for="filter_end">end date</label>
        <input class="string optional prefilled" id="filter_end" name="end" size="50" type="text" value="<%= @end_date %>">
      </div>

      <input name="" type="submit" value="Filter">
    </form>
  </section>

  <table>
    <tr class="headers">
      <th>Title</th>
      <th>ID</th>
      <th>Votes</th>
    </tr>
    <% @projects.each do |project| %>
      <tr class="finalist" data-count="<%= project.vote_count %>" data-id="<%= project.id %>">
        <td><%= link_to project.title, project_path(project) %></td>
        <td><%= project.id %></td>
        <td><%= project.vote_count %></td>
      </tr>
    <% end %>
  </table>
</section>

<% content_for :javascript do %>
  <% javascript_tag do %>
    $(window).load(function(){
      $('#filter_start').datepicker({dateFormat: 'yy-mm-dd'});
      $('#filter_end').datepicker({dateFormat: 'yy-mm-dd'});
    });
  <% end %>
<% end %>
